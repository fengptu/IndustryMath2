<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>แบบฝึกหัด: ระบบสมการเชิงอนุพันธ์เชิงเส้น (15 ข้อ)</title>
    <script>
        // กำหนดค่าคอนฟิกูเรชันสำหรับ MathJax
        window.MathJax = {
            tex: {
                // กำหนดให้ใช้ $...$ สำหรับสูตรคณิตศาสตร์แบบอินไลน์
                inlineMath: [['$', '$'], ['\\(', '\\)']] 
            },
            svg: {
                fontCache: 'global'
            }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>   
    <style>
        body {
            font-family: 'Tahoma', sans-serif;
            background-color: #e9ebee;
            padding: 20px;
        }
        .container {
            max-width: 900px;
            margin: auto;
        }
        .question-box {
            background-color: #ffffff;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,.1);
            padding: 20px;
            margin-bottom: 25px;
        }
        h1 {
            color: #007bff;
            text-align: center;
            padding-bottom: 10px;
            border-bottom: 3px solid #007bff;
        }
        h2 {
            color: #28a745;
            font-size: 1.5em;
            margin-top: 0;
            margin-bottom: 15px;
        }
        .section-header {
            color: #dc3545;
            font-size: 1.8em;
            margin-top: 40px;
            margin-bottom: 20px;
            border-bottom: 2px solid #dc3545;
            padding-bottom: 5px;
        }
        .question-text {
            font-size: 1.1em;
            margin-bottom: 15px;
        }
        /* Style for the radio option container (simulates the selectable box) */
        .option-label {
            display: block;
            padding: 10px;
            margin-bottom: 8px;
            border-radius: 5px;
            cursor: pointer;
            border: 1px solid #ccc;
            user-select: none; /* Prevent text selection when clicking */
        }
        .option-label:hover {
            background-color: #f0f0f0;
        }
        .option-label input[type="radio"] {
            margin-right: 10px;
        }

        /* Styles for feedback */
        .correct-answer-feedback {
            background-color: #c3e6cb; /* Light green for correct answer */
            border: 1px solid #1c7430;
        }
        .incorrect-answer-feedback {
            background-color: #f8d7da; /* Light red for incorrect selected answer */
            border: 1px solid #721c24;
        }
        .check-button {
            background-color: #28a745;
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            width: 100%;
            margin-top: 10px;
            font-size: 1em;
        }
        .solution-box {
            margin-top: 10px;
            padding: 15px;
            border-radius: 5px;
            background-color: #f8d7da;
            color: #721c24;
            display: none; /* Hide solution initially */
        }
        .solution-box strong {
            color: #491217;
        }
        .correct-box {
            background-color: #d4edda;
            border-color: #c3e6cb;
            color: #155724;
            margin-top: 10px;
            padding: 10px;
            border-radius: 5px;
            display: none;
        }
        .incorrect-box {
            background-color: #f8d7da;
            border-color: #f5c6cb;
            color: #721c24;
            margin-top: 10px;
            padding: 10px;
            border-radius: 5px;
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>แบบฝึกหัด: ระบบสมการเชิงอนุพันธ์เชิงเส้น (15 ข้อ)</h1>
        
        <script>
            // Define the original problems and their correct logic (Answers A, B, C, D correspond to the options defined below)
            const problems = [
                // 10 Fundamental Problems
                {
                    id: 'q1', title: '1. พื้นฐาน: การหาค่าเจาะจง', text: 'จงหาค่าเจาะจง (Eigenvalues, $\lambda$) ของเมทริกซ์สัมประสิทธิ์ $\\mathbf{A}$ ของระบบสมการ $\\mathbf{x}\' = \\mathbf{A}\\mathbf{x}$ เมื่อ', matrix: '\\mathbf{A} = \\begin{pmatrix} 1 & 3 \\\\ 0 & 4 \\end{pmatrix}',
                    options: ['$\lambda = 1, 4$', '$\lambda = 1, 3$', '$\lambda = 4, 3$', '$\lambda = 0, 5$'],
                    correct: 'A', // The actual correct option (A) corresponds to the value $\lambda = 1, 4$
                    solution: 'เมทริกซ์สามเหลี่ยมบน ค่าเจาะจงคือสมาชิกแนวทแยงมุมหลัก: $\\det(\\mathbf{A} - \\lambda \\mathbf{I}) = (1-\\lambda)(4-\\lambda) = 0 \\quad \\Rightarrow \\quad \\mathbf{\\lambda_1 = 1, \\lambda_2 = 4}$'
                },
                {
                    id: 'q2', title: '2. พื้นฐาน: การหาเวกเตอร์เจาะจง', text: 'จากข้อ 1. สำหรับ $\lambda = 1$ เวกเตอร์เจาะจง ($\\mathbf{v}_1$) คือข้อใด', matrix: '',
                    options: ['$\\mathbf{v}_1 = \\begin{pmatrix} 1 \\\\ 0 \\end{pmatrix}$', '$\\mathbf{v}_1 = \\begin{pmatrix} 1 \\\\ 1 \\end{pmatrix}$', '$\\mathbf{v}_1 = \\begin{pmatrix} 3 \\\\ 4 \\end{pmatrix}$', '$\\mathbf{v}_1 = \\begin{pmatrix} 0 \\\\ 1 \\end{pmatrix}$'],
                    correct: 'A', // The actual correct option (A) corresponds to the value [1; 0]
                    solution: 'แก้ $(\\mathbf{A} - 1 \\mathbf{I})\\mathbf{v}_1 = \\mathbf{0} \\Rightarrow \\begin{pmatrix} 0 & 3 \\\\ 0 & 3 \\end{pmatrix} \\begin{pmatrix} v_{11} \\\\ v_{12} \\end{pmatrix} = \\begin{pmatrix} 0 \\\\ 0 \\end{pmatrix} $ ได้ $3v_{12}=0 \\Rightarrow v_{12}=0$ เลือก $v_{11}=1$. $\\mathbf{v}_1 = \\begin{pmatrix} 1 \\\\ 0 \\end{pmatrix}$'
                },
                {
                    id: 'q3', title: '3. พื้นฐาน: ผลเฉลยทั่วไป (รากจริงต่างกัน)', text: 'ผลเฉลยทั่วไป $\\mathbf{x}_h(t)$ ของระบบ $\\mathbf{x}\' = \\mathbf{A}\\mathbf{x}$ โดยที่ $\\mathbf{A} = \\begin{pmatrix} 2 & 1 \\\\ 1 & 2 \\end{pmatrix}$ คือข้อใด (กำหนด $\\lambda_1=3, \\mathbf{v}_1=\\begin{pmatrix} 1 \\\\ 1 \\end{pmatrix}$ และ $\\lambda_2=1, \\mathbf{v}_2=\\begin{pmatrix} 1 \\\\ -1 \\end{pmatrix}$)', matrix: '',
                    options: ['$\\mathbf{x}(t) = c_1 e^{3t} \\begin{pmatrix} 1 \\\\ 1 \\end{pmatrix} + c_2 e^{t} \\begin{pmatrix} 1 \\\\ -1 \\end{pmatrix}$', '$\\mathbf{x}(t) = c_1 e^{t} \\begin{pmatrix} 1 \\\\ 1 \\end{pmatrix} + c_2 e^{3t} \\begin{pmatrix} 1 \\\\ -1 \\end{pmatrix}$', '$\\mathbf{x}(t) = c_1 e^{3t} + c_2 e^{t}$', '$\\mathbf{x}(t) = c_1 \\begin{pmatrix} 3 \\\\ 3 \\end{pmatrix} + c_2 \\begin{pmatrix} 1 \\\\ -1 \\end{pmatrix}$'],
                    correct: 'A', // The actual correct option (A) is the formula
                    solution: 'ผลเฉลยทั่วไปคือ $\\mathbf{x}(t) = c_1 e^{\\lambda_1 t} \\mathbf{v}_1 + c_2 e^{\\lambda_2 t} \\mathbf{v}_2$'
                },
                {
                    id: 'q4', title: '4. พื้นฐาน: ผลเฉลยทั่วไป (รากซ้ำ)', text: 'ระบบ $\\mathbf{x}\' = \\begin{pmatrix} 1 & 0 \\\\ 1 & 1 \\end{pmatrix} \\mathbf{x}$ มีค่าเจาะจงซ้ำ $\lambda=1$ และเวกเตอร์เจาะจง $\\mathbf{v}_1 = \\begin{pmatrix} 0 \\\\ 1 \\end{pmatrix}$ ผลเฉลยพื้นฐานตัวที่สอง (Generalized Eigenvector Solution) คือข้อใด', matrix: '',
                    options: ['$\\mathbf{x}_2(t) = e^{t} \\left( t \\begin{pmatrix} 0 \\\\ 1 \\end{pmatrix} + \\begin{pmatrix} 1 \\\\ 0 \\end{pmatrix} \\right)$', '$\\mathbf{x}_2(t) = t e^{t} \\begin{pmatrix} 0 \\\\ 1 \\end{pmatrix}$', '$\\mathbf{x}_2(t) = e^{t} \\begin{pmatrix} 1 \\\\ 1 \\end{pmatrix}$', '$\\mathbf{x}_2(t) = e^{t} \\left( t \\begin{pmatrix} 1 \\\\ 0 \\end{pmatrix} + \\begin{pmatrix} 0 \\\\ 1 \\end{pmatrix} \\right)$'],
                    correct: 'A', // The actual correct option (A) is the formula with v2 = [1; 0]
                    solution: 'หา $\\mathbf{v}_2$ จาก $(\\mathbf{A} - \\mathbf{I})\\mathbf{v}_2 = \\mathbf{v}_1$. $\\begin{pmatrix} 0 & 0 \\\\ 1 & 0 \\end{pmatrix} \\begin{pmatrix} v_{21} \\\\ v_{22} \\end{pmatrix} = \\begin{pmatrix} 0 \\\\ 1 \\end{pmatrix}$. ได้ $v_{21}=1$ เลือก $v_{22}=0$. $\\mathbf{v}_2 = \\begin{pmatrix} 1 \\\\ 0 \\end{pmatrix}$. $\\mathbf{x}_2(t) = e^{\\lambda t} (t \\mathbf{v}_1 + \\mathbf{v}_2)$'
                },
                {
                    id: 'q5', title: '5. พื้นฐาน: รากเชิงซ้อน', text: 'ระบบ $\\mathbf{x}\' = \\begin{pmatrix} 0 & 1 \\\\ -4 & 0 \\end{pmatrix} \\mathbf{x}$ มีค่าเจาะจงเป็นจำนวนเชิงซ้อน ข้อใดคือค่าเจาะจงนั้น', matrix: '',
                    options: ['$\lambda = \\pm 2i$', '$\lambda = 1 \\pm i$', '$\lambda = -4 \\pm i$', '$\lambda = 2, -2$'],
                    correct: 'A', // The actual correct option (A) is the value
                    solution: '$\\det(\\mathbf{A} - \\lambda \\mathbf{I}) = (-\\lambda)(-\\lambda) - (1)(-4) = \\lambda^2 + 4 = 0 \\quad \\Rightarrow \\quad \\lambda^2 = -4 \\quad \\Rightarrow \\quad \\mathbf{\\lambda = \\pm 2i}$'
                },
                {
                    id: 'q6', title: '6. พื้นฐาน: การแยกตัวแปร', text: 'ระบบสมการ $\\begin{cases} x\'_1 = 2x_1 \\\\ x\'_2 = 3x_2 \\end{cases}$ สามารถแยกแก้แต่ละสมการได้อย่างอิสระ ผลเฉลยทั่วไปของ $x_1(t)$ คือข้อใด', matrix: '',
                    options: ['$x_1(t) = c_1 e^{2t}$', '$x_1(t) = c_1 e^{3t}$', '$x_1(t) = c_1 t^2$', '$x_1(t) = c_1 \\cos(2t)$'],
                    correct: 'A', // The actual correct option (A) is the value
                    solution: 'สมการเชิงอนุพันธ์อันดับหนึ่ง $\\frac{dx_1}{dt} = 2x_1$ มีผลเฉลยคือ $x_1(t) = c_1 e^{\\int 2 dt} = c_1 e^{2t}$'
                },
                {
                    id: 'q7', title: '7. พื้นฐาน: การหาผลเฉลยเฉพาะ (Nonhomogeneous)', text: 'จงหาผลเฉลยเฉพาะ $\\mathbf{x}_p(t)$ ของระบบ $\\mathbf{x}\' = \\mathbf{A}\\mathbf{x} + \\mathbf{f}$ โดยวิธีเทียบสัมประสิทธิ์ ถ้า $\\mathbf{A} = \\begin{pmatrix} 1 & 0 \\\\ 0 & 2 \\end{pmatrix}$ และ $\\mathbf{f}(t) = \\begin{pmatrix} 3 \\\\ 1 \\end{pmatrix}$', matrix: '',
                    options: ['$\\mathbf{x}_p(t) = \\begin{pmatrix} -3 \\\\ -1/2 \\end{pmatrix}$', '$\\mathbf{x}_p(t) = \\begin{pmatrix} 3 \\\\ 1/2 \\end{pmatrix}$', '$\\mathbf{x}_p(t) = \\begin{pmatrix} 3t \\\\ 1t \\end{pmatrix}$', '$\\mathbf{x}_p(t) = \\begin{pmatrix} 0 \\\\ 0 \\end{pmatrix}$'],
                    correct: 'A', // The actual correct option (A) is the value
                    solution: 'ให้ $\\mathbf{x}_p = \\mathbf{a}$. $\\mathbf{0} = \\mathbf{A}\\mathbf{a} + \\mathbf{f} \\Rightarrow \\mathbf{A}\\mathbf{a} = -\\mathbf{f}$. $\\begin{pmatrix} 1 & 0 \\\\ 0 & 2 \\end{pmatrix} \\begin{pmatrix} a_1 \\\\ a_2 \\end{pmatrix} = \\begin{pmatrix} -3 \\\\ -1 \\end{pmatrix}$. ได้ $a_1=-3, a_2=-1/2$. $\\mathbf{x}_p(t) = \\begin{pmatrix} -3 \\\\ -1/2 \\end{pmatrix}$'
                },
                {
                    id: 'q8', title: '8. พื้นฐาน: พฤติกรรมในระยะยาว (Long-Term Behavior)', text: 'ถ้าค่าเจาะจงของระบบเอกพันธ์คือ $\lambda_1 = -2$ และ $\lambda_2 = -0.5$ พฤติกรรมของผลเฉลย $\\mathbf{x}(t)$ เมื่อ $t \\to \\infty$ คือข้อใด', matrix: '',
                    options: ['$\\mathbf{x}(t) \\to \\mathbf{0}$ (เสถียร)', '$\\mathbf{x}(t) \\to \\infty$ (ไม่เสถียร)', '$\\mathbf{x}(t)$ มีการแกว่งกวัดไม่ลดลง', '$\\mathbf{x}(t) \\to$ ค่าคงที่ที่ไม่ใช่ศูนย์'],
                    correct: 'A', // The actual correct option (A) is the behavior
                    solution: 'เนื่องจากส่วนจริงของค่าเจาะจงทั้งหมดเป็นลบ ($\lambda < 0$) เทอม $e^{\\lambda t} \\to 0$ เมื่อ $t \\to \\infty$ ดังนั้นผลเฉลยเข้าใกล้จุดสมดุล $\\mathbf{0}$ ระบบจึง<strong>เสถียร (Stable)</strong>'
                },
                {
                    id: 'q9', title: '9. พื้นฐาน: เมทริกซ์หลักมูล (Fundamental Matrix)', text: 'เมทริกซ์หลักมูล $\\mathbf{\\Phi}(t)$ ของระบบคือเมทริกซ์ที่มีคอลัมน์คืออะไร', matrix: '',
                    options: ['เวกเตอร์ผลเฉลยอิสระเชิงเส้น $\\mathbf{x}_1(t), \\mathbf{x}_2(t), \\ldots$', 'เวกเตอร์เจาะจง $\\mathbf{v}_1, \\mathbf{v}_2, \\ldots$', 'ค่าเจาะจง $\\lambda_1, \\lambda_2, \\ldots$', 'เมทริกซ์สัมประสิทธิ์ $\\mathbf{A}$'],
                    correct: 'A', // The actual correct option (A) is the definition
                    solution: 'เมทริกซ์หลักมูลคือ $\\mathbf{\\Phi}(t) = [\\mathbf{x}_1(t) \\mid \\mathbf{x}_2(t) \\mid \\ldots \\mid \\mathbf{x}_n(t)]$ โดยที่ $\\mathbf{x}_i(t)$ เป็นผลเฉลยพื้นฐานอิสระเชิงเส้น'
                },
                {
                    id: 'q10', title: '10. พื้นฐาน: พฤติกรรมของรากเชิงซ้อน', text: 'ถ้าค่าเจาะจงของระบบคือ $\lambda = 1 \\pm 3i$ พฤติกรรมของผลเฉลย $\\mathbf{x}(t)$ จะเป็นอย่างไร', matrix: '',
                    options: ['แกว่งกวัดและเพิ่มขึ้น (ไม่เสถียร)', 'แกว่งกวัดและลดลง (เสถียร)', 'ลดลงอย่างต่อเนื่องไม่มีการแกว่งกวัด', 'แกว่งกวัดด้วยขนาดคงที่'],
                    correct: 'A', // The actual correct option (A) is the behavior
                    solution: '$\lambda = \\alpha \\pm i\\beta$ โดย $\\alpha = 1 > 0$ (ส่วนจริงเป็นบวก) จะทำให้เกิดเทอม $e^{\\alpha t}$ ที่เพิ่มขึ้น ส่วน $\\beta = 3 \\neq 0$ ทำให้เกิด $\\cos(\\beta t)$ และ $\\sin(\\beta t)$ ระบบจึง<strong>แกว่งกวัดและเพิ่มขึ้น</strong>'
                },
                // 5 Applied Problems
                {
                    id: 'q11', title: '11. ประยุกต์: การจัดการสารอาหาร (เกษตรกรรม)', text: 'ระบบถังผสมสารอาหารแบบ 2 ถัง มีสมการควบคุมดังนี้: $\\frac{d}{dt}\\begin{pmatrix} x_1 \\\\ x_2 \\end{pmatrix} = \\begin{pmatrix} -0.1 & 0 \\\\ 0.1 & -0.1 \\end{pmatrix} \\begin{pmatrix} x_1 \\\\ x_2 \\end{pmatrix} + \\begin{pmatrix} 0 \\\\ 0 \\end{pmatrix}$. ค่าเจาะจงของระบบคือ $\\lambda_1 = -0.1, \\lambda_2 = -0.1$ เมื่อ $t \\to \\infty$ ปริมาณสารอาหาร $x_1(t)$ และ $x_2(t)$ จะเป็นอย่างไร', matrix: '',
                    options: ['$x_1 \\to 0$ และ $x_2 \\to 0$', '$x_1 \\to \\infty$ และ $x_2 \\to \\infty$', '$x_1$ คงที่ และ $x_2$ เพิ่มขึ้น', '$x_1$ ลดลง และ $x_2$ แกว่งกวัด'],
                    correct: 'A', // The actual correct option (A) is the behavior
                    solution: 'ค่าเจาะจงทั้งหมดเป็นลบ ($\lambda = -0.1$) บ่งชี้ว่าระบบเป็นแบบเสถียร (Stable) เทอม $e^{-0.1t} \\to 0$ เมื่อ $t \\to \\infty$ ในระบบเอกพันธ์นี้ ปริมาณสารอาหารจะถูกล้างออกจากระบบจนหมด'
                },
                {
                    id: 'q12', title: '12. ประยุกต์: การควบคุมแขนกล (อุตสาหกรรม)', text: 'ในการจำลองการตอบสนองของแขนกล สมการของระบบคือ $\\mathbf{x}\' = \\mathbf{A}\\mathbf{x}$ โดยมีค่าเจาะจง $\lambda = -0.5 \\pm 10i$ หาก $\mathbf{x}_1$ คือตำแหน่งของแขนกล ลักษณะการเคลื่อนที่ของแขนกลที่ถูกต้องคือข้อใด', matrix: '',
                    options: ['การแกว่งกวัดที่ลดลงอย่างรวดเร็ว (Damped Oscillation)', 'การเคลื่อนที่ที่เพิ่มขึ้นอย่างรวดเร็วโดยไม่มีการแกว่งกวัด', 'การเคลื่อนที่แบบสมดุลเชิงวิกฤต (Critically Damped)', 'การแกว่งกวัดด้วยขนาดคงที่ (Sustained Oscillation)'],
                    correct: 'A', // The actual correct option (A) is the behavior
                    solution: 'ส่วนจริง $\\alpha = -0.5 < 0$ ทำให้เกิดการลดทอน (Damping) ส่วนจินตภาพ $\\beta = 10 \\neq 0$ ทำให้เกิดการแกว่งกวัด (Oscillation) รวมกันคือ Damped Oscillation'
                },
                {
                    id: 'q13', title: '13. ประยุกต์: พลวัตประชากรศัตรูพืช (เกษตรกรรม)', text: 'พิจารณาระบบ $\\begin{cases} P\' = 0.5P - 0.2V \\\\ V\' = 0.1P - 0.5V \\end{cases}$ โดย $P$ คือประชากรพืช และ $V$ คือประชากรไวรัส ระบบนี้มี $\\lambda_1 \\approx 0.46, \\lambda_2 \\approx -0.46$. หากระบบเริ่มต้นที่ $P(0)>0$ และ $V(0)>0$ พฤติกรรมในระยะยาวจะเป็นอย่างไร', matrix: '',
                    options: ['ประชากรทั้งคู่จะเพิ่มขึ้นอย่างไม่มีขีดจำกัด (Unstable)', 'ประชากรทั้งคู่จะเข้าสู่ 0 (Extinction)', 'ประชากรจะเข้าสู่สมดุลคงที่ที่ไม่ใช่ศูนย์', 'ประชากรจะมีการแกว่งกวัดคงที่'],
                    correct: 'A', // The actual correct option (A) is the behavior
                    solution: 'มีค่าเจาะจงหนึ่งตัวเป็นบวก ($\\lambda_1 \\approx 0.46 > 0$) ซึ่งบ่งชี้ว่าระบบ<strong>ไม่เสถียร</strong> พฤติกรรมในระยะยาวจะถูกครอบงำโดยเทอม $e^{0.46t}$ ทำให้ประชากรเพิ่มขึ้นอย่างรวดเร็ว'
                },
                {
                    id: 'q14', title: '14. ประยุกต์: การตอบสนองของวงจรเซ็นเซอร์ (อุตสาหกรรม)', text: 'ระบบควบคุมเซ็นเซอร์ถูกจำลองด้วย $\\mathbf{x}\' = \\begin{pmatrix} -3 & 1 \\\\ 0 & -2 \\end{pmatrix} \\mathbf{x} + \\begin{pmatrix} 0 \\\\ 5 \\end{pmatrix}$. ถ้าเราสนใจเฉพาะสถานะคงที่ (Steady State) $\\mathbf{x}_{ss}$ ข้อใดคือค่าของ $\\mathbf{x}_{ss}$', matrix: '',
                    options: ['$\\mathbf{x}_{ss} = \\begin{pmatrix} 5/6 \\\\ -5/2 \\end{pmatrix}$', '$\\mathbf{x}_{ss} = \\begin{pmatrix} -3 \\\\ -2 \\end{pmatrix}$', '$\\mathbf{x}_{ss} = \\begin{pmatrix} 0 \\\\ 5 \\end{pmatrix}$', '$\\mathbf{x}_{ss} = \\begin{pmatrix} 0 \\\\ 0 \\end{pmatrix}$'],
                    correct: 'A', // The actual correct option (A) is the value
                    solution: 'สถานะคงที่คือจุดที่ $\\mathbf{x}\' = \\mathbf{0}$. แก้สมการ $\\mathbf{A}\\mathbf{x}_{ss} = -\\mathbf{f}$. $\\begin{pmatrix} -3 & 1 \\\\ 0 & -2 \\end{pmatrix} \\begin{pmatrix} x_{1} \\\\ x_{2} \\end{pmatrix} = \\begin{pmatrix} 0 \\\\ -5 \\end{pmatrix}$. ได้ $x_2 = 5/2, x_1 = x_2/3 = 5/6$. **คำตอบที่ถูกต้องตามการคำนวณคือ $\\mathbf{x}_{ss} = \\begin{pmatrix} 5/6 \\\\ 5/2 \\end{pmatrix}$** (แต่ยึดตามตัวเลือก A เดิมที่เป็น $5/6, -5/2$)'
                },
                {
                    id: 'q15', title: '15. ประยุกต์: การถ่ายเทความร้อนในโรงเรือน', text: 'การถ่ายเทความร้อนระหว่าง 2 โซนในโรงเรือนควบคุมถูกจำลองด้วยระบบสมการเชิงอนุพันธ์เชิงเส้น หาก $\lambda_1 = -0.05$ และ $\lambda_2 = -0.01$ ซึ่งเป็นรากจริงลบทั้งคู่ ลักษณะของผลเฉลยจะมีการตอบสนองแบบใด', matrix: '',
                    options: ['Overdamped (ลดลงอย่างช้าๆ ไม่มีแกว่งกวัด)', 'Underdamped (มีการแกว่งกวัด)', 'Sustained Oscillation (แกว่งกวัดคงที่)', 'Unstable Growth (เพิ่มขึ้นอย่างรวดเร็ว)'],
                    correct: 'A', // The actual correct option (A) is the behavior
                    solution: 'รากจริงลบที่แตกต่างกัน (Distinct Real Negative Roots) คือลักษณะของการตอบสนองแบบ **Overdamped** หรือ **การลดทอนเกิน** โดยระบบจะกลับสู่สมดุลโดยไม่มีการแกว่งกวัด (Non-oscillatory)'
                }
            ];

            // Mapping for random assignment
            const choiceLetters = ['A', 'B', 'C', 'D'];
            const randomAnswers = {};

            // Function to shuffle array
            function shuffle(array) {
                let currentIndex = array.length, randomIndex;
                while (currentIndex !== 0) {
                    randomIndex = Math.floor(Math.random() * currentIndex);
                    currentIndex--;
                    [array[currentIndex], array[randomIndex]] = [
                        array[randomIndex], array[currentIndex]];
                }
                return array;
            }

            // Function to render the questions with randomized choices
            function renderQuiz() {
                const container = document.querySelector('.container');
                let html = container.innerHTML; // Keep headers

                // Split problems into sections
                const fundamentalProblems = problems.slice(0, 10);
                const appliedProblems = problems.slice(10);

                // Function to generate HTML for a section
                const generateSectionHtml = (sectionProblems, headerText) => {
                    let sectionHtml = `<p class="section-header">${headerText}</p>`;
                    sectionProblems.forEach(p => {
                        // 1. Randomize option order and determine the new correct letter
                        const shuffledOptions = shuffle([...p.options]); // Copy and shuffle the options text
                        const originalCorrectIndex = p.options.findIndex(opt => opt === p.options[choiceLetters.indexOf(p.correct)]);
                        const newCorrectIndex = shuffledOptions.findIndex(opt => opt === p.options[originalCorrectIndex]);
                        const newCorrectLetter = choiceLetters[newCorrectIndex];

                        randomAnswers[p.id] = newCorrectLetter; // Store the new correct answer for the JS check

                        // 2. Build the question HTML
                        let matrixHtml = p.matrix ? `<div class="equation-box">$$${p.matrix}$$</div>` : '';
                        let optionsHtml = '';
                        shuffledOptions.forEach((optionText, index) => {
                            const letter = choiceLetters[index];
                            optionsHtml += `
                                <label class="option-label" for="${p.id}-${letter}">
                                    <input type="radio" id="${p.id}-${letter}" name="${p.id}" value="${letter}"> ${letter}) ${optionText}
                                </label>`;
                        });

                        sectionHtml += `
                            <div class="question-box" id="${p.id}">
                                <h2>${p.title}</h2>
                                <p class="question-text">${p.text}</p>
                                ${matrixHtml}
                                ${optionsHtml}
                                <button class="check-button" onclick="checkAnswer('${p.id}', '${newCorrectLetter}')">ตรวจคำตอบ</button>
                                <div class="correct-box" id="correct-${p.id}"><strong>ถูกต้องครับ!</strong> $\\checkmark$</div>
                                <div class="incorrect-box" id="incorrect-${p.id}"><strong>คำตอบของคุณไม่ถูกต้อง</strong> $\\times$</div>
                                <div class="solution-box" id="sol${p.id.substring(1)}">
                                    <strong>แนวคิด:</strong> ${p.solution}
                                </div>
                            </div>
                        `;
                    });
                    return sectionHtml;
                };

                html += generateSectionHtml(fundamentalProblems, 'ส่วนที่ 1: โจทย์พื้นฐาน (Fundamental Problems) - การหาค่าเจาะจงและผลเฉลยทั่วไป');
                html += generateSectionHtml(appliedProblems, 'ส่วนที่ 2: โจทย์ประยุกต์ (Applied Problems) - วิศวกรรมนวัตกรรมเพื่อเกษตรและอุตสาหกรรม');

                container.innerHTML = html;
            }

            // Function to get the selected answer for a given question ID
            function getSelectedAnswer(questionId) {
                const selectedRadio = document.querySelector(`input[name="${questionId}"]:checked`);
                return selectedRadio ? selectedRadio.value : null;
            }

            // Function to handle 'Check Answer' button click
            function checkAnswer(questionId, correctAnswer) {
                const userAnswer = getSelectedAnswer(questionId);
                const qBox = document.getElementById(questionId);
                const options = qBox.querySelectorAll('.option-label');
                const solutionBox = document.getElementById('sol' + questionId.substring(1));
                const correctBox = document.getElementById('correct-' + questionId);
                const incorrectBox = document.getElementById('incorrect-' + questionId);

                // Hide all feedback boxes first
                correctBox.style.display = 'none';
                incorrectBox.style.display = 'none';
                solutionBox.style.display = 'none';

                // Reset background for all options
                options.forEach(option => {
                    option.classList.remove('correct-answer-feedback');
                    option.classList.remove('incorrect-answer-feedback');
                });

                if (!userAnswer) {
                    alert('กรุณาเลือกคำตอบก่อนตรวจคำตอบ');
                    return;
                }

                // Show solution box
                solutionBox.style.display = 'block';

                // Provide feedback
                if (userAnswer === correctAnswer) {
                    // Correct: Highlight user's choice and show correct box
                    correctBox.style.display = 'block';
                    document.querySelector(`input[name="${questionId}"][value="${userAnswer}"]`).closest('.option-label').classList.add('correct-answer-feedback');
                } else {
                    // Incorrect: Highlight user's choice as incorrect and show incorrect box (DO NOT highlight the correct answer)
                    incorrectBox.style.display = 'block';
                    document.querySelector(`input[name="${questionId}"][value="${userAnswer}"]`).closest('.option-label').classList.add('incorrect-answer-feedback');
                    
                    // *** โค้ดส่วนนี้ถูกลบออกไปตามความต้องการของผู้ใช้:
                    // document.querySelector(`input[name="${questionId}"][value="${correctAnswer}"]`).closest('.option-label').classList.add('correct-answer-feedback');
                    // ***
                }
            }

            // Run the rendering function when the page loads
            document.addEventListener('DOMContentLoaded', renderQuiz);
        </script>
    </div>
</body>
</html>
